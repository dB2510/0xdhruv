<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=icon href=../../fav/favicon.ico type=image/gif><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Alata&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel=stylesheet><link rel=stylesheet href=../../css/font.css media=all><meta property="og:title" content="Aggregation vs Aggregation"><meta property="og:description" content="Overview Special thanks to Abhishek Kumar for feedback and review.
In this article we will see the comparison between Threshold BLS Signature Aggregation and just BLS Signature Aggregation. First we will see what are exactly each of these and then we will see what are the similarities and differences between each of them.
First let&rsquo;s start with normal BLS Signature Aggregation
BLS Signature Aggregation In BLS Signature Aggregation, it aggregates multiple signatures signed using different private keys."><meta property="og:type" content="article"><meta property="og:url" content="https://dB2510.github.io/blogs/aggregation/"><meta property="article:section" content="blogs"><meta property="article:published_time" content="2022-05-15T00:00:00+00:00"><meta property="article:modified_time" content="2022-05-15T00:00:00+00:00"><meta property="og:site_name" content="0xdhruv"><meta name=twitter:card content="summary"><meta name=twitter:title content="Aggregation vs Aggregation"><meta name=twitter:description content="Overview Special thanks to Abhishek Kumar for feedback and review.
In this article we will see the comparison between Threshold BLS Signature Aggregation and just BLS Signature Aggregation. First we will see what are exactly each of these and then we will see what are the similarities and differences between each of them.
First let&rsquo;s start with normal BLS Signature Aggregation
BLS Signature Aggregation In BLS Signature Aggregation, it aggregates multiple signatures signed using different private keys."><link rel=stylesheet href=../../bootstrap-5/css/bootstrap.min.css media=all><link rel=stylesheet href=../../css/header.css media=all><link rel=stylesheet href=../../css/footer.css media=all><link rel=stylesheet href=../../css/theme.css media=all><style>:root{--text-color:#343a40;--text-secondary-color:#6c757d;--background-color:#eaedf0;--secondary-background-color:#64ffda1a;--primary-color:#007bff;--secondary-color:#f8f9fa;--text-color-dark:#e4e6eb;--text-secondary-color-dark:#b0b3b8;--background-color-dark:#18191a;--secondary-background-color-dark:#212529;--primary-color-dark:#ffffff;--secondary-color-dark:#212529}body{font-size:1rem;font-weight:400;line-height:1.5;text-align:left}</style><meta name=description content><link rel=stylesheet href=../../css/single.css><script defer src=../../fontawesome-5/all-5.15.4.js></script><title>Aggregation vs Aggregation | dhruv</title></head><body class=light onload=loading()><script src=../../bootstrap-5/js/bootstrap.bundle.js></script>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header><nav class="pt-3 navbar navbar-expand-lg"><div class="container-fluid mx-xs-2 mx-sm-5 mx-md-5 mx-lg-5"><a class="navbar-brand primary-font text-wrap" href=../../><img src=../../fav/favicon.ico width=30 height=30 class="d-inline-block align-top">
0xdhruv</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarContent aria-controls=navbarContent aria-expanded=false aria-label="Toggle navigation"><svg aria-hidden="true" height="24" viewBox="0 0 16 16" width="24" data-view-component="true"><path fill-rule="evenodd" d="M1 2.75A.75.75.0 011.75 2h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 2.75zm0 5A.75.75.0 011.75 7h12.5a.75.75.0 110 1.5H1.75A.75.75.0 011 7.75zM1.75 12a.75.75.0 100 1.5h12.5a.75.75.0 100-1.5H1.75z"/></svg></button><div class="collapse navbar-collapse text-wrap primary-font" id=navbarContent><ul class="navbar-nav ms-auto text-center"><li class="nav-item navbar-text"><a class=nav-link href=../../#about aria-label=about>About</a></li><li class="nav-item navbar-text"><a class=nav-link href=../../#experience aria-label=experience>Experience</a></li><li class="nav-item navbar-text"><a class=nav-link href=../../#contact aria-label=contact>Contact</a></li><li class="nav-item navbar-text"><a class=nav-link href=../../blogs title="Blog posts">Blog</a></li></ul><div class=text-center><button id=theme-toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div></div></nav></header><div id=content><section id=single><div class=container><div class="row justify-content-center"><div class="col-sm-12 col-md-12 col-lg-9"><div class=pr-lg-4><div class="title mb-5"><h1 class="text-center mb-4">Aggregation vs Aggregation</h1><div class=text-center>Dhruv Bodani
<small>|</small>
May 15, 2022</div></div><article class=page-content><h3 id=overview>Overview</h3><p><em>Special thanks to Abhishek Kumar for feedback and review.</em></p><p>In this article we will see the comparison between <strong>Threshold BLS Signature Aggregation</strong> and just <strong>BLS Signature Aggregation</strong>. First we will see what are exactly each of these and then we will see what are the similarities and differences between each of them.</p><p>First let&rsquo;s start with normal BLS Signature Aggregation</p><h3 id=bls-signature-aggregation>BLS Signature Aggregation</h3><p>In BLS Signature Aggregation, it aggregates multiple signatures signed using different private keys. Consider signatures as (\(\sigma_0 , \sigma_1 , &mldr; , \sigma_{n-1}\)) over group \(G_2\), with messages (\(m_0, m_1, &mldr; , m_{n-1}\)), then aggregated signature (\(\sigma\)) will be:</p><p>\[ \sigma = \sigma_0 + \sigma_0 + &mldr; + \sigma_{n-1} \]
\[ \sigma = \sum_{i=0}^{n-1}\sigma_i \]</p><p>where, &ldquo;+&rdquo; represents point addition over group \(G_2\) and (\(\sigma_i = H(m_i)g_2^{sk_i}\)), where \(H(m)\) is a hash of message, \(sk_i\) is the ith secret key and \(g_2\) is the generator of \(G_2\).</p><p>Likewise public keys can be aggregated as:</p><p>\[ pk_{agg} = \sum_{i=0}^{n-1}pk_i \]</p><p>where \(pk_i\) is the ith public key which is a point in group \(G_1\)</p><h3 id=threshold-bls-signature-aggregation>Threshold BLS Signature Aggregation</h3><p>Threshold BLS Signature is the signature obtained from aggregating <strong>Partial Signatures</strong> (\(\sigma_i\)) of a message m signed using shared private keys also called shares (\(sk_i\)). We define t and n as threshold and total number of participants. Thus only t of n (eg: 3-of-5) are required to generate a threshold aggregated signature (\(\sigma\)) .</p><p>We can achive this using Shamir Secret Sharing. We first create a private key and then we split it into shares of it. We use Shamir Secret Sharing to split the private key into shares where a threshold of them can reconstruct the private key.</p><h4 id=shamir-secret-sharing-sss>Shamir Secret Sharing (SSS)</h4><p>The way SSS works is that it creates a polynomial of degree t-1 over a finite field \( F_q \) such that:</p><p>\[ f(x) = a_0 + a_1x + &mldr; + a_{t-1}x^{t-1}\]</p><p>where \( a_0 \) or \( f(0) \) is the private key (k)</p><p>The n shares (\(k_0, k_1, &mldr;, k_{n-1}\)) of the private key are points on this polynomial such that:</p><p>\[ k_i = f(x_i) \]
where \(x_i\) is the identifier (i) of the private key share.</p><p>The partial signature signed using each share: \(\sigma_i = H(m)k_i\). The message m should be same for all partial signatures.</p><h4 id=threshold-aggregation>Threshold Aggregation</h4><p>The signature aggregation in this case is similar previous one where we just need to take the sum of all the signatures but there&rsquo;s catch we need to reconstruct final signature using >= t partial signatures. For that we need a method called <em><strong><a href=https://en.wikipedia.org/wiki/Shamir%27s_Secret_Sharing#Computationally_efficient_approach>Lagrange Interpolation</a></strong></em></p><p>Lagrange Interpolation: According to lagrange interpolation, if we have k+1 data points of any polynomial then the polynomial of degree k can constructed as:</p><p>\[ L(x) = \sum_{i=0}^ky_il_i(x) \]
\[ l_i(x) = \prod_{0 \leq m \leq k, m \neq i} \frac{x_m - x}{x_m - x_i} \]</p><p>Note: \(L(x)\) is the desired polynomial \(f(x)\) which was created at the time splitting of private key into shares, where L(0) is the original private key.</p><p>Now we can say that, threshold aggregated signature is:</p><p>\[ \sigma = \sum_{i=0}^{t-1}\sigma_i \prod_{ m = 0 , m \neq i}^{t-1} \frac{x_m}{x_m - x_i} \]</p><p>where RHS is nothing but \( L(0) \) with \(\sigma_i\) as \(y_i\) which is obtained from signing m with private key \(k_i\).
Note: The product part in the above equation is in finite field \(F_q\) and summation part is a point of group \(G_2\). To get the aggregated signature we don&rsquo;t need to reconstruct the polynomial rather we only need \(L(0)\):</p><p>\[ \sigma = \sum_{i=0}^{t-1}H(m)k_i \prod_{ m = 0 , m \neq i}^{t-1} \frac{x_m}{x_m - x_i} \]
\[ \sigma = H(m)\sum_{i=0}^{t-1}k_i \prod_{ m = 0 , m \neq i}^{t-1} \frac{x_m}{x_m - x_i} \]
since, \( k = L(0) = \sum_{i=0}^{t-1}k_i \prod_{ m = 0 , m \neq i}^{t-1} \frac{x_m}{x_m - x_i} \)
\[ \therefore \sigma = H(m)k \]</p><h3 id=conclusion>Conclusion</h3><p>Both are different types of BLS aggregation. Both apply summation of signatures to obtain an aggregated signature but differently. Both are on elliptic curve BLS12-381. Both have similar verification techniques, i.e, using pairings.</p><h3 id=references>References</h3><ul><li><a href=https://www.jcraige.com/threshold-bls-signatures>https://www.jcraige.com/threshold-bls-signatures</a></li><li><a href=https://hackmd.io/@benjaminion/bls12-381>https://hackmd.io/@benjaminion/bls12-381</a></li><li><a href=https://crypto.stanford.edu/~dabo/pubs/papers/aggreg.pdf>https://crypto.stanford.edu/~dabo/pubs/papers/aggreg.pdf</a></li><li><a href=https://eprint.iacr.org/2018/483.pdf>https://eprint.iacr.org/2018/483.pdf</a></li><li><a href=https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-bls-signature-03>https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-bls-signature-03</a></li><li><a href=https://eth2book.info/altair/part2/building_blocks/signatures/>https://eth2book.info/altair/part2/building_blocks/signatures/</a></li></ul></article></div></div><div class="col-sm-12 col-md-12 col-lg-3"><div class=sticky-sidebar><aside class=toc><h5>Table Of Contents</h5><div class=toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#overview>Overview</a></li><li><a href=#bls-signature-aggregation>BLS Signature Aggregation</a></li><li><a href=#threshold-bls-signature-aggregation>Threshold BLS Signature Aggregation</a></li><li><a href=#conclusion>Conclusion</a></li><li><a href=#references>References</a></li></ul></li></ul></nav></div></aside><aside class=tags><h5>Tags</h5><ul class="tags-ul list-unstyled list-inline"><li class=list-inline-item><a href=https://dB2510.github.io/tags/threshold-bls-signature-aggregation target=_blank>Threshold BLS Signature Aggregation</a></li><li class=list-inline-item><a href=https://dB2510.github.io/tags/bls-signature-aggregation target=_blank>BLS Signature Aggregation</a></li><li class=list-inline-item><a href=https://dB2510.github.io/tags/bls-signatures target=_blank>BLS Signatures</a></li></ul></aside><aside class=social><h5>Social</h5><div class=social-content><ul class=list-inline><li class="list-inline-item text-center"><a target=_blank href="https://twitter.com/share?text=Aggregation%20vs%20Aggregation&url=https%3a%2f%2fdB2510.github.io%2fblogs%2faggregation%2f"><i class="fab fa-twitter"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="https://api.whatsapp.com/send?text=Aggregation%20vs%20Aggregation: https%3a%2f%2fdB2510.github.io%2fblogs%2faggregation%2f"><i class="fab fa-whatsapp"></i></a></li><li class="list-inline-item text-center"><a target=_blank href="mailto:?subject=Aggregation%20vs%20Aggregation&body=Check out this site https%3a%2f%2fdB2510.github.io%2fblogs%2faggregation%2f"><i class="fa fa-envelope"></i></a></li></ul></div></aside></div></div></div><div class=row><div class="col-sm-12 col-md-12 col-lg-9 p-2"></div></div></div><button class="p-2 px-3" onclick=topFunction() id=topScroll>
<i class="fas fa-angle-up"></i></button></section><script>var topScroll=document.getElementById("topScroll");window.onscroll=function(){scrollFunction()};function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?topScroll.style.display="block":topScroll.style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}</script></div><footer><div class="container py-3" id=recent-posts></div><div class="text-center pt-2"><span class=px-1><a href=https://github.com/dB2510 aria-label=github><svg xmlns="http://www.w3.org/2000/svg" width="2.7em" height="2.7em" viewBox="0 0 1792 1792"><path d="M522 1352q-8 9-20-3-13-11-4-19 8-9 20 3 12 11 4 19zm-42-61q9 12 0 19-8 6-17-7t0-18q9-7 17 6zm-61-60q-5 7-13 2-10-5-7-12 3-5 13-2 10 5 7 12zm31 34q-6 7-16-3-9-11-2-16 6-6 16 3 9 11 2 16zm129 112q-4 12-19 6-17-4-13-15t19-7q16 5 13 16zm63 5q0 11-16 11-17 2-17-11 0-11 16-11 17-2 17 11zm58-10q2 10-14 14t-18-8 14-15q16-2 18 9zm964-956v960q0 119-84.5 203.5T1376 1664h-224q-16 0-24.5-1t-19.5-5-16-14.5-5-27.5v-239q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105T1386 856q0-121-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27T578 459.5 492 446q-44 113-7 204-79 85-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-40 36-49 103-21 10-45 15t-57 5-65.5-21.5T484 1274q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 103t.5 68q0 22-11 33.5t-22 13-33 1.5H416q-119 0-203.5-84.5T128 1376V416q0-119 84.5-203.5T416 128h960q119 0 203.5 84.5T1664 416z"/></svg></a></span><span class=px-1><a href=https://www.linkedin.com/in/dhruv-bodani/ aria-label=linkedin><svg xmlns="http://www.w3.org/2000/svg" width="2.4em" height="2.4em" fill="#fff" aria-label="LinkedIn" viewBox="0 0 512 512"><rect width="512" height="512" fill="#0077b5" rx="15%"/><circle cx="142" cy="138" r="37"/><path stroke="#fff" stroke-width="66" d="M244 194v198M142 194v198"/><path d="M276 282c0-20 13-40 36-40 24 0 33 18 33 45v105h66V279c0-61-32-89-76-89-34 0-51 19-59 32"/></svg></a></span><a href=https://twitter.com/dhruvbodani aria-label=twitter><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48"><path fill="#03a9f4" d="M42 37c0 2.762-2.239 5-5 5H11c-2.762.0-5-2.238-5-5V11c0-2.762 2.238-5 5-5h26c2.761.0 5 2.238 5 5V37z"/><path fill="#fff" d="M36 17.12c-.882.391-1.999.758-3 .88 1.018-.604 2.633-1.862 3-3-.951.559-2.671 1.156-3.793 1.372C31.311 15.422 30.033 15 28.617 15 25.897 15 24 17.305 24 20v2c-4 0-7.9-3.047-10.327-6-.427.721-.667 1.565-.667 2.457.0 1.819 1.671 3.665 2.994 4.543-.807-.025-2.335-.641-3-1 0 .016.0.036.0.057.0 2.367 1.661 3.974 3.912 4.422C16.501 26.592 16 27 14.072 27c.626 1.935 3.773 2.958 5.928 3-1.686 1.307-4.692 2-7 2-.399.0-.615.022-1-.023C14.178 33.357 17.22 34 20 34c9.057.0 14-6.918 14-13.37.0-.212-.007-.922-.018-1.13C34.95 18.818 35.342 18.104 36 17.12"/></svg></a></div><div class="container py-4"><div class="row justify-content-center"><div class="col-md-4 text-center"><div class=pb-2><a href=https://dB2510.github.io/ title=dhruv><img alt="Footer logo" src=../../fav/favicon.ico height=40px width=40px></a></div>&copy; 2022 All Rights Reserved<div class=text-secondary>Made with
<span class=text-danger>&#10084;</span>
and
<a href=https://github.com/gurusabarish/hugo-profile target=_blank title="Designed and developed by gurusabarish">Hugo Profile</a></div></div></div></div></footer><script>document.body.className.includes("light")&&(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))});var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')),tooltipList=tooltipTriggerList.map(function(e){return new bootstrap.Tooltip(e)})</script><script>let loadingIcons;function loading(){myVar=setTimeout(showPage,100)}function showPage(){try{document.getElementById("loading-icons").style.display="block"}catch{}}</script></body><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script type=text/x-mathjax-config>
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script></html>